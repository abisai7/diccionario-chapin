---
import type { CollectionEntry } from "astro:content";
import { getCategoryColor } from "../utils/categoryColors";
import { useTranslations } from "../utils/i18n";

interface Props {
  entry: CollectionEntry<"words-es" | "words-en">;
  lang: string;
  titleLevel?: "h3" | "h4";
}

const { entry, lang, titleLevel = "h4" } = Astro.props;
const t = useTranslations(lang);
---

<a
  href={`/${lang}/palabras/${entry.slug}/`}
  class="word-related-card bg-card border-theme hover:shadow-theme-md relative rounded-lg border p-4 transition-all duration-200 hover:-translate-y-1"
>
  {
    entry.data.category && (
      <span
        class="absolute top-3 right-3 inline-block rounded-full px-2 py-0.5 text-xs font-medium text-white"
        style={`background-color: ${getCategoryColor(entry.data.category)};`}
      >
        {entry.data.category}
      </span>
    )
  }
  {
    titleLevel === "h3" ? (
      <h3 class="text-text m-0 mb-2 font-semibold">{entry.data.word}</h3>
    ) : (
      <h4 class="text-text m-0 mb-2 font-semibold">{entry.data.word}</h4>
    )
  }
  <p class="text-secondary m-0 line-clamp-2 text-sm leading-relaxed">
    {entry.data.meaning}
  </p>
  <span class="text-primary mt-2 inline-flex items-center text-xs font-medium">
    {t("word.learn_more")}
    <svg
      width="12"
      height="12"
      viewBox="0 0 24 24"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
      class="ml-1"
    >
      <path d="M5 12h14M12 5l7 7-7 7"></path>
    </svg>
  </span>
</a>

<style>
  .word-related-card {
    text-decoration: none;
    color: inherit;
    display: block;
  }

  .word-related-card:hover {
    border-color: var(--primary);
    background-color: var(--card-hover);
  }

  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
</style>
