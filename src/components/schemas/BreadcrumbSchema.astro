---
import { useTranslations } from "../../utils/i18n";

interface BreadcrumbItem {
  name: string;
  url: string;
}

interface Props {
  lang: string;
  siteUrl: string | URL;
  items: BreadcrumbItem[];
}

const { lang, siteUrl, items } = Astro.props;
const t = useTranslations(lang);

const breadcrumbSchema = {
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  itemListElement: [
    {
      "@type": "ListItem",
      position: 1,
      name: t("nav.home"),
      item: new URL(`/${lang}/`, siteUrl).toString(),
    },
    ...items.map((item, index) => ({
      "@type": "ListItem",
      position: index + 2,
      name: item.name,
      item: new URL(item.url, siteUrl).toString(),
    })),
  ],
};
---

<script type="application/ld+json" set:html={JSON.stringify(breadcrumbSchema)} />
