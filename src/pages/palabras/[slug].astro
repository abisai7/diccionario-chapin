---
import Base from "../../layouts/Base.astro";
import { getCollection } from "astro:content";

export const prerender = true;

export async function getStaticPaths() {
  const allWords = await getCollection("words");
  return allWords.map((entry) => ({
    params: { slug: entry.slug },
    props: { entry },
  }));
}

const { entry } = Astro.props;
const { Content } = await entry.render();
const word = entry.data;
---

<Base title={`${word.word} — Diccionario Chapín`}>
  <section class="mx-auto max-w-[1100px] px-6">
    <button
      onclick="history.back()"
      class="cursor-pointer px-4 py-2.5 font-semibold transition-all duration-200 active:scale-95"
      style="background: var(--card); color: var(--text); border: 1px solid var(--border); border-radius: var(--radius-md); box-shadow: 0 1px 2px var(--shadow-sm); &:hover { background: var(--card-hover) }"
    >
      ← Volver
    </button>
    <article
      class="mt-3.5 p-6 transition-all duration-200"
      style="background: var(--card); border: 1px solid var(--border); border-radius: var(--radius-xl); box-shadow: 0 2px 8px var(--shadow-md)"
    >
      <h1 class="m-0 mb-1.5 text-[2rem] font-bold tracking-[0.3px]" style="color: var(--text)">
        {word.word}
      </h1>
      <div class="mb-3 flex items-center gap-2 text-sm">
        <span class="italic" style="color: var(--muted)">[ chapinismo ]</span>
        {
          word.category && (
            <span
              class="rounded-full px-3 py-1 text-xs font-medium"
              style="background: var(--glow-primary); color: var(--primary); border: 1px solid var(--primary)"
            >
              {word.category}
            </span>
          )
        }
      </div>
      <div class="my-3 text-base leading-relaxed" style="color: var(--text-secondary)">
        {word.meaning}
      </div>

      <div class="mt-6 pt-4" style="border-top: 1px solid var(--border)">
        <h3 class="my-0 mb-3 flex items-center gap-2 text-lg font-semibold">
          <svg
            width="20"
            height="20"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <path d="M3 3v18h18"></path>
            <path d="M18 17V9"></path>
            <path d="M13 17V5"></path>
            <path d="M8 17v-3"></path>
          </svg>
          Ejemplos
        </h3>
        <ul class="mt-4 space-y-2 pl-5">
          {
            word.examples?.map((ex) => (
              <li
                class="my-2 p-3 text-sm leading-relaxed italic"
                style="color: var(--muted); background: var(--glow-primary); border-left: 2px solid var(--primary); border-radius: var(--radius-md)"
              >
                "{ex}"
              </li>
            ))
          }
        </ul>
      </div>

      {
        Content && (
          <div class="prose mt-6 pt-4" style="border-top: 1px solid var(--border)">
            <Content />
          </div>
        )
      }
    </article>
  </section>
</Base>
