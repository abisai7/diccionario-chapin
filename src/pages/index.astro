
---
import Base from "../layouts/Base.astro";
import SearchBox from "../components/SearchBox.astro";
import Ticker from "../components/Ticker.astro";
import words from "../data/words.json";
import WordCard from "../components/WordCard.astro";

const wordList = words.map(w => w.word);
const shuffled = [...wordList].sort(() => Math.random() - .5);
const featured = shuffled.slice(0, Math.min(45, shuffled.length));
const top = words.slice(0, 6);
---
<Base title="Diccionario Chapín">
  <section 
    class="max-w-[1100px] mx-auto px-6 py-6 grid gap-3.5 backdrop-blur-sm" 
    style="
      border: 1px solid var(--border); 
      border-radius: var(--radius-xl); 
      background: linear-gradient(180deg, var(--card) 0%, var(--bg-accent) 100%);
      box-shadow: 0 4px 12px var(--shadow-md);
    "
  >
    <h1 class="m-0 text-[clamp(1.8rem,2.4vw,2.6rem)] font-bold bg-clip-text text-transparent bg-gradient-to-r" style="background-image: linear-gradient(to right, var(--text), var(--primary-light))">
      Diccionario Chapín
    </h1>
    <p class="m-0 text-base" style="color: var(--muted)">
      Palabras chapinas con significado y ejemplos.
    </p>
    <SearchBox placeholder="Buscar 'patojo', 'chilero'..." />
    <div 
      class="px-3 py-2 text-sm backdrop-blur-sm" 
      style="border: 1px solid var(--border); border-radius: var(--radius-md); background: var(--glow-primary); color: var(--muted)"
    >
      <span class="inline-flex items-center gap-2">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="12" cy="12" r="10"/>
          <path d="M12 16v-4M12 8h.01"/>
        </svg>
        Sugerencia: presiona <kbd class="px-2 py-0.5 mx-1 font-mono text-xs" style="background: var(--card); border: 1px solid var(--border); border-radius: var(--radius-sm); color: var(--text)">/</kbd> para enfocar el buscador.
      </span>
    </div>
  </section>

  <section class="max-w-[1100px] mx-auto px-6">
    <Ticker words={featured} />
  </section>

  <section class="max-w-[1100px] mx-auto px-6">
    <h2 class="m-0 mb-2.5 text-2xl font-bold">Destacadas</h2>
    <div class="grid gap-3.5 grid-cols-[repeat(auto-fill,minmax(260px,1fr))] mt-4">
      {top.map(item => <WordCard word={item.word} meaning={item.meaning} />)}
    </div>
  </section>

  <script is:inline>
    document.addEventListener('keydown', (e) => {
      if (e.key === '/' && !(e.target instanceof HTMLInputElement)) {
        e.preventDefault();
        const input = document.querySelector('input[type="search"]');
        input?.focus();
      }
    });
  </script>
</Base>
